<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"

      xmlns:mycc="http://xmlns.jcp.org/jsf/composite/components"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>Facelet Title</title>
<script>
    function handleUpdateComplete(xhr, status, args) {
        if (args.success) {
            showAlert();
        }
    }

    function showAlert() {
        PrimeFaces.showToast({
            title: 'Success',
            message: 'OTP sent successfully',
            severity: 'success'
        });
    }
</script>

    </h:head>
    
    <h:outputStylesheet name="css/styles.min.css" />
    <h:outputStylesheet name="primeflex/primeflex.css"/>
    <h:body>
        <!--  Body Wrapper -->
        <p:growl id="growl" showDetail="true"/>
        <h:form>
             
             
                <!--  Main wrapper -->
                <div class="body-wrapper">
                    <!--  Header Start -->
                   
                    <!--  Header End -->
                    <div class="container-fluid">
                        <!--  Row 1 -->
                        <div class="row d-flex justify-content-center align-items-center">
                                 <div class="w-50 card shadow-2 rounded  ui-fluid formgrid grid d-flex flex-column justify-content-between align-items-center">

                                    <div class=" col-12 md:col-8 my-3">

                                        <h3  class="text-center text-700 text-bold text-primary">Reset Password</h3>
                                    </div>
                                     <div class=" col-12 md:col-8 my-3">
<!--                                          <p:outputPanel id="availabilityMessage">
                                              <h:outputText rendered="#{ commoncdi.renderd}" id="outputText" value="User ID not avaliable" style="color:black" />
                                                </p:outputPanel>-->
                                        <div class="ui-inputgroup">
                                            <div class="ui-inputgroup-addon"><i class="pi pi-lock"></i></div>
                                            <p:inputText id="UserID" value="#{commoncdi.userID}" placeholder="Enter User ID">
                                                <p:ajax event="blur" listener="#{commoncdi.userIdNotAvailiable()}" update="email message verifyotp btn" />
                                                
                                            </p:inputText>
                                        
                                          
                                        </div>
                                    </div>
                                    <div class=" col-12 md:col-8 my-3">
                                        <div class="ui-inputgroup">
                                            <div class="ui-inputgroup-addon"><i class="pi pi-lock"></i></div>
                                            <p:password feedback="true" id="NewPassword" value="#{commoncdi.password}" placeholder="New Password">
                                                <p:keyFilter  regEx="[A-Z][a-z][0-9]" />
                                            </p:password>
                                          
                                        </div>
                                    </div>

                                    <div class="col-12 md:col-8 my-3">
                                        <div class="ui-inputgroup">
                                            <div class="ui-inputgroup-addon"><i class="pi pi-lock"></i></div>
                                            <p:inputText id="ConfirmPassword" value="#{commoncdi.confirmpassword}" placeholder="Confirm Password">
                                                <p:keyFilter  regEx="[A-Z][a-z][0-9]" />
                                            </p:inputText>
                                           
                                        </div>
                                    </div>

                                    <div class="col-12 md:col-8 my-3">
                                         <p:outputLabel for="email" styleClass="block">Email Address</p:outputLabel>
                                        <div class="ui-inputgroup">
                                           
                                            <div class="ui-inputgroup-addon"><i class="pi pi-mail"></i></div>
                                            
                                            <p:inputText id="email"  value="#{commoncdi.email}" placeholder="Enter Email Address" disabled="#{not commoncdi.renderd}"/>
                                        </div>
                                    </div>

                                    <div class="col-12 md:col-4 my-3 ">
                                        <p:commandButton id="message" value="Send OTP" action="#{commoncdi.sendEmail()}" update="growl" disabled="#{not commoncdi.renderd}" />
                                    </div>

                                    <div class="col-12 md:col-8 my-3">
                                           <p:outputLabel for="verifyotp" styleClass="block" rendered="#{commoncdi.renderd}">Enter otp sent to Your Email</p:outputLabel>
                                       
                                        <div class="ui-inputgroup">
                                            
                                              <p:inputText id="verifyotp"  value="#{commoncdi.verificationOTP}" disabled="#{not commoncdi.renderd}" />


                                        </div>
                                    </div>

                                    <div class="col-12 md:col-4 my-3 ">
                                   
                                        <p:commandButton value="Verify and Reset" id="btn" action="#{commoncdi.resetPassword()}" disabled="#{not commoncdi.renderd}" update="growl"/>
                                    </div>
                                </div>

                            </div>
                        </div>

                    </div>
              
                                
        </h:form>
    </h:body>
</html>

